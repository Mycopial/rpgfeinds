<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>ENOXIA: THE LIVING PORTAL // OMEGA</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Three.js Core -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- Three.js Post-Processing -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/RGBShiftShader.js"></script>

    <!-- OrbitControls -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700;900&family=Share+Tech+Mono&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <!-- 3D Background -->
    <div id="canvas-container"></div>

    <!-- Navigation -->
    <div id="ui-overlay">
        <nav class="nav-container" id="main-nav">
            <a href="#home" class="nav-link active" data-target="home">Home</a>
            <a href="#simulation" class="nav-link" data-target="simulation">Simulation</a>
            <a href="#archive" class="nav-link" data-target="archive">Archive</a>
            <a href="#manifests" class="nav-link" data-target="manifests">Manifests</a>
            <a href="#protocols" class="nav-link" data-target="protocols">Protocols</a>
            <a href="#comms" class="nav-link" data-target="comms">Comms</a>
        </nav>
    </div>

    <!-- Main Content Area -->
    <main>
        <!-- SECTION: HOME -->
        <section id="home" class="active">
            <div class="text-center z-20 pointer-events-none select-none">
                <h1 id="welcome-text" class="enoxia-title-style">ENOXIA<br><span
                        class="text-2xl font-sans tracking-[0.5em] text-white/60 text-shadow-none">THE AWAKENING</span>
                </h1>
            </div>
            <div id="status-bar">
                <span class="text-yellow-400 animate-pulse">‚óè</span> ESTABLISHING UPLINK... <span class="blink">_</span>
            </div>
        </section>

        <!-- SECTION: SIMULATION (Foundry/Syrinscape) -->
        <section id="simulation">
            <h2 class="section-header enoxia-title-style">SIMULATION DECK</h2>
            <div class="flex flex-wrap justify-center gap-6 w-full max-w-4xl px-4">
                <a href="https://foundryvtt.rpgfiends.com/" target="_blank"
                    class="manifest-card flex-1 min-w-[300px] group flex flex-col items-center text-center py-12">
                    <i data-lucide="monitor-play"
                        class="w-12 h-12 text-watcher-cyan mb-4 group-hover:scale-110 transition-transform"></i>
                    <h3 class="text-2xl font-bold text-white mb-2">FOUNDRY VTT</h3>
                    <p class="text-xs text-gray-400">Initialize Virtual Tabletop</p>
                </a>
                <a href="https://app.syrinscape.com/80cf2defd71040819f087245b4e902f7/player/" target="_blank"
                    class="manifest-card flex-1 min-w-[300px] group flex flex-col items-center text-center py-12">
                    <i data-lucide="music"
                        class="w-12 h-12 text-magenta-magic mb-4 text-[#d946ef] group-hover:scale-110 transition-transform"></i>
                    <h3 class="text-2xl font-bold text-white mb-2">SYRINSCAPE</h3>
                    <p class="text-xs text-gray-400">Audio Feed & Ambiance</p>
                </a>
            </div>
        </section>

        <!-- SECTION: ARCHIVE (LegendKeeper) -->
        <section id="archive">
            <h2 class="section-header enoxia-title-style">ARCHIVE ACCESS</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-3xl px-4">
                <a href="https://app.legendkeeper.com/" target="_blank" class="action-btn text-center">
                    <i data-lucide="database" class="w-4 h-4"></i> MAIN DATABASE
                </a>
                <a href="https://app.legendkeeper.com/a/worlds/ckzef0fi5i28c0808zhyw30as/ckzef0g120002036cqtjlpd5r"
                    target="_blank" class="action-btn text-center border-[#4fffa8] text-[#4fffa8] hover:bg-[#4fffa8]">
                    <i data-lucide="scroll" class="w-4 h-4"></i> ENOXIA LORE
                </a>
                <a href="https://app.legendkeeper.com/a/worlds/clt34sk1p13j80jkt4y02fyzg/clt34tf7w002q356ixg906ypo"
                    target="_blank"
                    class="action-btn text-center border-purple-500 text-purple-500 hover:bg-purple-500">
                    <i data-lucide="skull" class="w-4 h-4"></i> CALL OF CTHULHU
                </a>
                <a href="https://app.legendkeeper.com/a/worlds/cl7ta2od0lrrs0710y352bvyl/cl7ta2p7m0002033c3rzcubzu"
                    target="_blank" class="action-btn text-center border-green-600 text-green-600 hover:bg-green-600">
                    <i data-lucide="triangle" class="w-4 h-4"></i> DELTA GREEN
                </a>
            </div>
        </section>

        <!-- SECTION: MANIFESTS -->
        <section id="manifests">
            <h2 class="section-header enoxia-title-style">UNIT MANIFESTS</h2>
            <div class="card-grid" id="manifest-grid">
                <!-- Cards injected by JS -->
            </div>
        </section>

        <!-- SECTION: PROTOCOLS -->
        <section id="protocols">
            <h2 class="section-header enoxia-title-style">SYSTEM PROTOCOLS</h2>
            <div class="card-grid">
                <div class="manifest-card cursor-default">
                    <h3 class="text-xl font-bold text-enoxia-green mb-2">PROTOCOL 01: AEONIC LAW</h3>
                    <p class="text-sm text-gray-400">Direct interaction with the Ever-When is strictly prohibited.
                        Causality breaches will result in immediate termination.</p>
                </div>
                <div class="manifest-card cursor-default">
                    <h3 class="text-xl font-bold text-watcher-cyan mb-2">PROTOCOL 02: AVARICE</h3>
                    <p class="text-sm text-gray-400">The Red Moon is a hostile entity. Report all chaotic fluctuations
                        or red mana spikes to the Citadel immediately.</p>
                </div>
                <div class="manifest-card cursor-default">
                    <h3 class="text-xl font-bold text-[#ff00ff] mb-2">PROTOCOL 03: THE BREACH</h3>
                    <p class="text-sm text-gray-400">Inter-planar travel is restricted. The Watcher monitors all
                        teleportation signatures for Serpent incursions.</p>
                </div>
            </div>
        </section>

        <!-- SECTION: COMMS (Socials) -->
        <section id="comms">
            <h2 class="section-header enoxia-title-style">SUBSPACE COMMS</h2>
            <div class="flex flex-wrap justify-center gap-6 w-full max-w-4xl px-4">
                <a href="https://discord.gg/4UQkFYRuCv" target="_blank"
                    class="manifest-card flex-1 min-w-[300px] group flex flex-col items-center text-center py-12 border-[#5865F2] hover:shadow-[0_0_20px_#5865F2]">
                    <i data-lucide="message-circle"
                        class="w-12 h-12 text-[#5865F2] mb-4 group-hover:scale-110 transition-transform"></i>
                    <h3 class="text-2xl font-bold text-white mb-2">DISCORD</h3>
                    <p class="text-xs text-gray-400">Join the Community</p>
                </a>
                <a href="https://www.youtube.com/@RPGFIENDS/playlists" target="_blank"
                    class="manifest-card flex-1 min-w-[300px] group flex flex-col items-center text-center py-12 border-[#FF0000] hover:shadow-[0_0_20px_#FF0000]">
                    <i data-lucide="youtube"
                        class="w-12 h-12 text-[#FF0000] mb-4 group-hover:scale-110 transition-transform"></i>
                    <h3 class="text-2xl font-bold text-white mb-2">YOUTUBE</h3>
                    <p class="text-xs text-gray-400">Session Recordings</p>
                </a>
            </div>
        </section>
    </main>

    <!-- Audio Controls -->
    <div id="audio-controls" class="fixed bottom-8 right-8 z-50 pointer-events-auto flex flex-col items-center gap-4">
        <div id="volume-container" class="hidden transition-all duration-300 origin-bottom">
            <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.5"
                class="w-24 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer -rotate-90 mb-8">
        </div>
        <button id="audio-toggle"
            class="action-btn rounded-full w-12 h-12 p-0 border-2 border-watcher-cyan hover:bg-watcher-cyan/20 transition-all bg-black/50 backdrop-blur-md relative z-10">
            <i data-lucide="volume-x" class="w-6 h-6"></i>
        </button>
    </div>
    <audio id="ambiance-audio" loop>
        <source src="assets/ambiance.mp3" type="audio/mp3">
    </audio>

    <!-- Unit Modal -->
    <div id="modal-backdrop">
        <div id="modal-content">
            <button id="modal-close"
                class="absolute top-4 right-4 text-gray-500 hover:text-white text-2xl">&times;</button>
            <div class="flex items-baseline justify-between border-b border-gray-700 pb-4 mb-4">
                <h3 id="m-name" class="text-3xl font-bold text-white font-['Cinzel_Decorative']">UNIT NAME</h3>
                <span id="m-status" class="text-xs border px-2 py-1 rounded">ACTIVE</span>
            </div>
            <div class="space-y-3 text-sm font-mono">
                <p><span class="text-gray-500">LOCATION:</span> <span id="m-loc"
                        class="text-watcher-cyan">Undefined</span></p>
                <p><span class="text-gray-500">ALLIANCE:</span> <span id="m-alliance" class="text-white">None</span></p>
                <p><span class="text-gray-500">MISSION:</span> <span id="m-mission"
                        class="text-enoxia-green">Unknown</span></p>
            </div>
            <div class="mt-6 pt-4 border-t border-gray-800">
                <p id="m-desc" class="text-gray-400 leading-relaxed mb-6">Description...</p>
                <a id="m-link" href="#" target="_blank"
                    class="block w-full text-center bg-watcher-cyan/10 border border-watcher-cyan text-watcher-cyan py-3 hover:bg-watcher-cyan hover:text-black transition-colors">
                    ACCESS D&D BEYOND SHEET
                </a>
            </div>
        </div>
    </div>

    <script src="js/data.js"></script>
    <script src="js/main.js"></script>
</body>

</html>